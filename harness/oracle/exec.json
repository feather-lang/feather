{
  "feature": "exec",
  "tclsh": "tclsh",
  "tests": [
    {
      "name": "exec-1.0",
      "file": "spec/tests/exec/exec-1.0.tcl",
      "script": "# Test: exec basic command\n# Execute simple command and capture output\n\nputs [exec echo hello]\n",
      "stdout": "hello\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-1.1",
      "file": "spec/tests/exec/exec-1.1.tcl",
      "script": "# Test: exec with multiple arguments\n# Arguments passed correctly to command\n\nputs [exec echo one two three]\n",
      "stdout": "one two three\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-1.2",
      "file": "spec/tests/exec/exec-1.2.tcl",
      "script": "# Test: exec strips trailing newline by default\n# Output should not have trailing newline\n\nset result [exec echo test]\nputs \"($result)\"\n",
      "stdout": "(test)\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-1.3",
      "file": "spec/tests/exec/exec-1.3.tcl",
      "script": "# Test: exec -keepnewline preserves trailing newline\n# Trailing newline retained\n\nset result [exec -keepnewline echo test]\nputs \"($result)\"\n",
      "stdout": "(test\n)\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-1.4",
      "file": "spec/tests/exec/exec-1.4.tcl",
      "script": "# Test: exec with -- to end switches\n# Allows command starting with dash\n\nputs [exec -- echo -n hello]\n",
      "stdout": "hello\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-1.5",
      "file": "spec/tests/exec/exec-1.5.tcl",
      "script": "# Test: exec printf for no-newline output\n# Command that doesn't output newline\n\nputs \"[exec printf %s test].\"\n",
      "stdout": "test.\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-2.0",
      "file": "spec/tests/exec/exec-2.0.tcl",
      "script": "# Test: exec with pipeline\n# Pipe output between commands\n\nputs [exec echo \"hello world\" | tr a-z A-Z]\n",
      "stdout": "HELLO WORLD\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-2.1",
      "file": "spec/tests/exec/exec-2.1.tcl",
      "script": "# Test: exec with multiple pipes\n# Chain multiple commands\n\nputs [exec echo \"3 1 2\" | tr \" \" \"\\n\" | sort]\n",
      "stdout": "1\n2\n3\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-2.2",
      "file": "spec/tests/exec/exec-2.2.tcl",
      "script": "# Test: exec with \u003c\u003c input redirection\n# Pass string as stdin\n\nputs [exec cat \u003c\u003c \"input text\"]\n",
      "stdout": "input text\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-2.3",
      "file": "spec/tests/exec/exec-2.3.tcl",
      "script": "# Test: exec with \u003c\u003c multiline input\n# Pass multiline string as stdin\n\nputs [exec wc -l \u003c\u003c \"line1\nline2\nline3\"]\n",
      "stdout": "       2\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-2.4",
      "file": "spec/tests/exec/exec-2.4.tcl",
      "script": "# Test: exec pipeline with \u003c\u003c input\n# Combine input redirection with pipe\n\nputs [exec tr a-z A-Z \u003c\u003c \"hello\"]\n",
      "stdout": "HELLO\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-3.0",
      "file": "spec/tests/exec/exec-3.0.tcl",
      "script": "# Test: exec non-zero exit code\n# Command failure raises error\n\ncatch {exec false} result\nputs [expr {$result ne \"\"}]\n",
      "stdout": "1\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-3.1",
      "file": "spec/tests/exec/exec-3.1.tcl",
      "script": "# Test: exec errorcode on failure\n# Check CHILDSTATUS in errorcode\n\ncatch {exec sh -c \"exit 42\"} result options\nset code [dict get $options -errorcode]\nputs [lindex $code 0]\nputs [lindex $code 2]\n",
      "stdout": "CHILDSTATUS\n42\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-3.2",
      "file": "spec/tests/exec/exec-3.2.tcl",
      "script": "# Test: exec with stderr output\n# stderr causes error by default\n\ncatch {exec sh -c \"echo error \u003e\u00262\"} result\nputs [string match \"*error*\" $result]\n",
      "stdout": "1\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-3.3",
      "file": "spec/tests/exec/exec-3.3.tcl",
      "script": "# Test: exec -ignorestderr\n# Ignore stderr output\n\nset result [exec -ignorestderr sh -c \"echo stdout; echo stderr \u003e\u00262\"]\nputs $result\n",
      "stdout": "stdout\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-3.4",
      "file": "spec/tests/exec/exec-3.4.tcl",
      "script": "# Test: exec 2\u003e@1 merge stderr to stdout\n# Redirect stderr to result\n\nset result [exec sh -c \"echo out; echo err \u003e\u00262\" 2\u003e@1]\nputs [llength [split $result \\n]]\n",
      "stdout": "2\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-4.0",
      "file": "spec/tests/exec/exec-4.0.tcl",
      "script": "# Test: exec background returns pid\n# \u0026 at end runs in background\n\nset pids [exec sleep 0 \u0026]\nputs [expr {[llength $pids] \u003e= 1}]\n",
      "stdout": "1\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-4.1",
      "file": "spec/tests/exec/exec-4.1.tcl",
      "script": "# Test: exec background pipeline returns multiple pids\n# Multiple processes in background\n\nset pids [exec echo test | cat \u0026]\nputs [expr {[llength $pids] \u003e= 1}]\n",
      "stdout": "1\ntest\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-5.0",
      "file": "spec/tests/exec/exec-5.0.tcl",
      "script": "# Test: exec command not found\n# Error when command doesn't exist\n\ncatch {exec nonexistent_command_xyz} result\nputs [expr {$result ne \"\"}]\n",
      "stdout": "1\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-5.1",
      "file": "spec/tests/exec/exec-5.1.tcl",
      "script": "# Test: exec with special characters in args\n# Arguments with spaces handled correctly\n\nputs [exec echo \"hello world\"]\n",
      "stdout": "hello world\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-5.2",
      "file": "spec/tests/exec/exec-5.2.tcl",
      "script": "# Test: exec with braced argument\n# Braces preserve argument\n\nputs [exec echo {hello world}]\n",
      "stdout": "hello world\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-5.3",
      "file": "spec/tests/exec/exec-5.3.tcl",
      "script": "# Test: exec with empty string argument\n# Empty argument passed correctly\n\nputs \"[exec printf %s \"\"].\"\n",
      "stdout": ".\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-6.0",
      "file": "spec/tests/exec/exec-6.0.tcl",
      "script": "# Test: exec true returns empty\n# Successful command with no output\n\nputs \"[exec true].\"\n",
      "stdout": ".\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-6.1",
      "file": "spec/tests/exec/exec-6.1.tcl",
      "script": "# Test: exec with variable expansion\n# Tcl variable expanded before exec\n\nset cmd echo\nset arg \"hello from var\"\nputs [exec $cmd $arg]\n",
      "stdout": "hello from var\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-6.2",
      "file": "spec/tests/exec/exec-6.2.tcl",
      "script": "# Test: exec with list expansion\n# Use {*} to expand args\n\nset args {one two three}\nputs [exec echo {*}$args]\n",
      "stdout": "one two three\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-6.3",
      "file": "spec/tests/exec/exec-6.3.tcl",
      "script": "# Test: exec with newline in output\n# Multiple lines captured\n\nputs [exec printf \"line1\\nline2\"]\n",
      "stdout": "line1\nline2\n",
      "stderr": "",
      "returncode": 0
    },
    {
      "name": "exec-6.4",
      "file": "spec/tests/exec/exec-6.4.tcl",
      "script": "# Test: exec binary data with -encoding\n# Handle non-UTF8 output\n\nputs [string length [exec printf \"\\x00\\x01\\x02\"]]\n",
      "stdout": "0\n",
      "stderr": "",
      "returncode": 0
    }
  ]
}